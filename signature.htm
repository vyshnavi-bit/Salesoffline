<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   
    
</head>
<body>
    <div>
        <div id="content">
           
            
            <div id="signatureparent" style=" color: Black;
            padding: 20px;">
                <div>
                    
                </div>
                <div id="signature" style=" border: 2px dotted black;
            background-color:Gray;">
                </div>
            </div>
            <div>
                <input type="button" id="btnPay" value="Save" onclick="Btngetsignatureclick();" class="SaveButton"
                    style="width: 156px; height: 30px;display: none;" />
                <input type="button" id="btnset" value="Clear" onclick="Btnsetsignatureclick();" class="SaveButton"
                    style="width: 156px; height: 30px;" />
            </div>
            <div id="displayarea">
            </div>
            <div id="tools">
            </div>
        </div>
        <div id="scrollgrabber">
        </div>
    </div>
   <!--<script src="Js/jquery.js" type="text/javascript"></script>-->
    <!--<script type="text/javascript">

        (function ($) {
            var topics = {};
            $.publish = function (topic, args) {
                if (topics[topic]) {
                    var currentTopic = topics[topic],
	        args = args || {};

                    for (var i = 0, j = currentTopic.length; i < j; i++) {
                        currentTopic[i].call($, args);
                    }
                }
            };
            $.subscribe = function (topic, callback) {
                if (!topics[topic]) {
                    topics[topic] = [];
                }
                topics[topic].push(callback);
                return {
                    "topic": topic,
                    "callback": callback
                };
            };
            $.unsubscribe = function (handle) {
                var topic = handle.topic;
                if (topics[topic]) {
                    var currentTopic = topics[topic];

                    for (var i = 0, j = currentTopic.length; i < j; i++) {
                        if (currentTopic[i] === handle.callback) {
                            currentTopic.splice(i, 1);
                        }
                    }
                }
            };
        })(jQuery);
    </script>-->
    <!--<script src="Js/jSignature.js" type="text/javascript"></script>
    <script src="Js/jSignature.CompressorBase30.js" type="text/javascript"></script>
    <script src="Js/jSignature.CompressorSVG.js" type="text/javascript"></script>
    <script src="Js/jSignature.UndoButton.js" type="text/javascript"></script>
    <script src="Js/signhere/jSignature.SignHere.js" type="text/javascript"></script>-->
   
   <!-- <script type="text/javascript">
        var $sigdivnew = "";
        var pubsubprefixnew = "";
        var $toolsnew = "";
        $(document).ready(function () {

            // This is the part where jSignature is initialized.
            var $sigdiv = $("#signature").jSignature({ 'UndoButton': true })
            // All the code below is just code driving the demo. 
	, $tools = $('#tools')
	, $extraarea = $('#displayarea')
	, pubsubprefix = 'jSignature.demo.'
            pubsubprefixnew = pubsubprefix;
            $sigdivnew = $sigdiv;
            $toolsnew = $tools;

            
            $.subscribe(pubsubprefix + 'image/svg+xml', function (data) {
                try {
                    var i = new Image()
                    i.src = 'data:' + data[0] + ';base64,' + btoa(data[1])
                    //$(i).appendTo($extraarea)
                } catch (ex) {
                }

                
            });
            

            $.subscribe(pubsubprefix + 'image/jsignature;base30', function (data) {
//                $('<span><b>This is a vector format not natively render-able by browsers. Format is a compressed "movement coordinates arrays" structure tuned for use server-side. The bonus of this format is its tiny storage footprint and ease of deriving rendering instructions in programmatic, iterative manner.</b></span>').appendTo($extraarea)
            });
            if (Modernizr.touch) {
                $('#scrollgrabber').height($('#content').height())
            }

        })
        var base30 = "";
        function Btngetsignatureclick() {
            //        var t = document.getElementById('signature').innerHTML;
            //        alert(t);
            //        $('#signature .row.selected img').each(function () {
            //            alert($(this).attr('src'))
            //        });
            //var data = $sigdiv.jSignature('getData', e.target.value)
            var data = $sigdivnew.jSignature('getData', "base30")
            $.publish(pubsubprefixnew + 'formatchanged')
            if (typeof data === 'string') {
                $('textarea', $toolsnew).val(data)
            } else if ($.isArray(data) && data.length === 2) {
                $('textarea', $toolsnew).val(data.join(','))
                document.getElementById('displayarea').innerHTML = data.join(',')
                $.publish(pubsubprefixnew + data[0], data);
            } else {
                try {
                    $('textarea', $toolsnew).val(JSON.stringify(data))
                } catch (ex) {
                    $('textarea', $toolsnew).val('Not sure how to stringify this, likely binary, format.')
                }
            }
            //document.getElementById('displayarea').innerHTML = $toolsnew;
            //.appendTo($toolsnew);
        }
        function Btnsetsignatureclick() {
            //$("#signature").jSignature("importData", "data:image/jsignature;base30,4N0Z200Y466864642Za8ceea4_1V6666466466444a666422_6LZ2022000Y422022224464464624200Z4884Y486622020024442422Z2442020Y2466a640Z4Y8422468868_3D4644666Z888648Y44484220Z2444886200Y24004a8a866Z88a866444Y48664Z8640000464Y424462Z4220");
            $("#signature").jSignature("importData", "data:image/jsignature;base30,");
        }
</script>-->
</body>
</html>
